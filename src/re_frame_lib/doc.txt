20171229
In order to convert this framework to a library, we need to pass the state
to all functions. API will be broken. That is a trade off. However, the API will be almost the same.

Things to do:
- Remove all global variables.
- Define functions to create the state required and validate it.
- Add :pre conditions to validate state.
- The core will define a function to create a new global state containing all
  intermedium states (subscriptions, events, cache, etc.)
- Add lot of tests.

